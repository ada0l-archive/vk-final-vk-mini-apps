{"version":3,"sources":["panels/Home.js","panels/Settings.js","panels/CreateSign.js","App.js","store/reducers/signs.reducer.js","store/reducers/index.js","store/store.js","index.js","assets/app.module.css"],"names":["moment","locale","Home","id","fetchedUser","owner","go","useState","isLoaded","setLoaded","signs","setSigns","read","write","userPerms","setUserPerms","isMyAlbum","isFriends","a","bridge","send","method","request_id","params","user_id","v","access_token","process","then","response","items","friends","some","friend","checkPerms","read_permission","write_permission","res","getUserInfo","userIDs","user_ids","join","fields","useEffect","axios","get","data","users","user","user_to_id","map","sign","authors","find","author","author_avatar","photo_200_orig","first_name","last_name","author_id","date","time_created","format","text","src","uuid_str","name","Fragment","mode","onClick","e","before","length","index","size","disabled","description","style","display","justifyContent","alignItems","width","weight","textAlign","flexDirection","paddingTop","height","color","margin","Settings","selectedViewUsers","setViewUsers","selectedSendUsers","setSendUsers","setFriends","error","setError","view","privacy","setPrivacy","viewUsersChipsProps","value","onChange","options","placeholder","emptyText","sendUsersChipsProps","label","friends_","filter","includes","header","top","currentTarget","ChipsSelect","showSelected","closeAfterSelect","onChangeStart","option","preventDefault","alert","renderChip","rest","icon","renderOption","otherProps","appearance","stretched","put","CreateSign","signType","setSignType","useEraser","setUseEraser","active","setActive","thickness","pencilConfig","setPencilConfig","setSign","onClickSubmit","formData","FormData","append","post","headers","dataset","to","zIndex","type","target","accept","reader","FileReader","onloadend","result","split","readAsDataURL","files","onSave","image","onLongPress","console","log","className","styles","position","right","gap","App","scheme","setScheme","activePanel","setActivePanel","setOwner","setUser","popout","setPopout","Proxy","URLSearchParams","window","location","search","searchParams","prop","ownerID","vk_profile_id","vk_user_id","name_case","ownerName","toString","subscribe","detail","fetchData","initialState","state","action","payload","rootReducer","combineReducers","signReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.c783afbc.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport bridge from \"@vkontakte/vk-bridge\";\n\nimport {\n  Panel,\n  PanelHeader,\n  Cell,\n  Card,\n  Group,\n  Div,\n  Text,\n  SubnavigationBar,\n  SubnavigationButton,\n  Spinner,\n  Avatar,\n  Title,\n} from \"@vkontakte/vkui\";\nimport {\n  Icon56Stars3Outline,\n  Icon28SettingsOutline,\n  Icon28BrushOutline,\n  Icon56CancelCircleOutline,\n} from \"@vkontakte/icons\";\nimport axios from \"axios\";\nimport moment from \"moment\";\n\nmoment.locale(\"ru\");\n\nconst Home = ({ id, fetchedUser, owner, go }) => {\n  const [isLoaded, setLoaded] = useState(false);\n  const [signs, setSigns] = useState([]);\n  const [userPerms, setUserPerms] = useState({ read: 0, write: 0 });\n\n  const isMyAlbum = () => {\n    return fetchedUser?.id == owner?.id;\n  };\n\n  const isFriends = async () => {\n    const friends = await bridge\n      .send(\"VKWebAppCallAPIMethod\", {\n        method: \"friends.get\",\n        request_id: \"32test\",\n        params: {\n          user_id: fetchedUser.id,\n          v: 5.131,\n          access_token: process.env.REACT_APP_ACCESS_TOKEN,\n        },\n      })\n      .then(({ response }) => response.items);\n    return friends.some((friend) => friend == owner.id);\n  };\n\n  const checkPerms = async (read_permission, write_permission) => {\n    if (owner.id == fetchedUser.id) {\n      setUserPerms({ read: 1, write: 0 });\n      return;\n    }\n    let read, write;\n    if (read_permission[0] > 2) {\n      const res = read_permission.some((friend) => friend == fetchedUser.id);\n      read = res;\n    } else {\n      switch (read_permission[0]) {\n        case 0: {\n          read = 1;\n          break;\n        }\n        case 1: {\n          read = await isFriends();\n          break;\n        }\n        default: {\n          read = 0;\n          break;\n        }\n      }\n    }\n\n    if (read_permission[0] > 2) {\n      const res = write_permission.some((friend) => friend == fetchedUser.id);\n      write = res;\n    } else {\n      switch (write_permission[0]) {\n        case 0: {\n          write = 1;\n          break;\n        }\n        case 1: {\n          write = await isFriends();\n          break;\n        }\n        default: {\n          write = 0;\n          break;\n        }\n      }\n    }\n\n    setUserPerms({ read: read, write: write });\n  };\n\n  const getUserInfo = async (userIDs) => {\n    return bridge\n      .send(\"VKWebAppCallAPIMethod\", {\n        method: \"users.get\",\n        request_id: \"32test\",\n        params: {\n          user_ids: userIDs?.join(\",\"),\n          fields: \"photo_200_orig\",\n          v: 5.131,\n          access_token: process.env.REACT_APP_ACCESS_TOKEN,\n        },\n      })\n      .then(({ response }) => response);\n  };\n\n  useEffect(async () => {\n    if (!owner) return;\n\n    const users = await axios\n      .get(`https://vk-final-vk-mini-apps.herokuapp.com/v1/user`)\n      .then(({ data }) => data);\n\n    setUserPerms({ write: 1, read: 1 });\n    if (users.some((user) => user.id == owner.id)) {\n      const { read_permission, write_permission } = await axios\n        .get(`https://vk-final-vk-mini-apps.herokuapp.com/v1/user/${owner.id}`)\n        .then(({ data }) => data);\n\n      checkPerms(read_permission, write_permission);\n    }\n\n    let signs = await axios\n      .get(\"https://vk-final-vk-mini-apps.herokuapp.com/v1/photo\", {\n        params: {\n          user_to_id: owner.id,\n        },\n      })\n      .then(({ data }) => {\n        return data;\n      });\n\n    const authors = await getUserInfo(signs?.map((sign) => sign.user_id));\n    signs = signs?.map((sign) => {\n      const user = authors.find((author) => author.id == sign.user_id);\n      return {\n        author_avatar: user?.photo_200_orig,\n        author: `${user?.first_name} ${user?.last_name}`,\n        author_id: user?.id,\n        date: moment(sign?.time_created).format(\"DD MMMM YYYY в HH:mm\"),\n        text: sign?.text ?? null,\n        src:\n          sign?.uuid_str != \"None\"\n            ? `https://vk-mini-apps.hb.bizmrg.com/${sign?.uuid_str}.png`\n            : null,\n      };\n    });\n    setSigns(signs);\n    setLoaded(true);\n  }, [owner]);\n\n  return (\n    <Panel id={id}>\n      <PanelHeader>\n        {isMyAlbum() ? \"Мои автографы\" : `Автографы ${owner?.name}`}\n      </PanelHeader>\n      {isLoaded ? (\n        <React.Fragment>\n          <SubnavigationBar mode=\"fixed\">\n            {isMyAlbum() ? (\n              <SubnavigationButton\n                onClick={(e) => go(e)}\n                before={<Icon28SettingsOutline />}\n                data-to=\"settings\"\n              >\n                Настройки\n              </SubnavigationButton>\n            ) : userPerms.write ? (\n              <SubnavigationButton\n                onClick={(e) => go(e)}\n                before={<Icon28BrushOutline />}\n                data-to=\"create_sign\"\n              >\n                Оставить автограф\n              </SubnavigationButton>\n            ) : (\n              <></>\n            )}\n          </SubnavigationBar>\n          {!userPerms.read ? (\n            <Div\n              style={{\n                display: \"flex\",\n                flexDirection: \"column\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n                paddingTop: 80,\n              }}\n            >\n              <Icon56CancelCircleOutline color=\"red\" width={96} height={96} />\n              <Title> Доступ ограничен </Title>\n            </Div>\n          ) : signs?.length > 0 ? (\n            signs.map((sign, index) => (\n              <Group key={index}>\n                <Cell\n                  before={<Avatar size={40} src={sign.author_avatar} />}\n                  disabled\n                  description={sign.date}\n                  //   onClick={redirect(sign.author_id)}\n                >\n                  {sign.author}\n                </Cell>\n                <Div>\n                  {sign.src ? (\n                    <Card\n                      style={{\n                        display: \"flex\",\n                        justifyContent: \"center\",\n                        alignItems: \"center\",\n                      }}\n                    >\n                      <img width={200} src={sign.src} />\n                    </Card>\n                  ) : (\n                    <Text weight=\"semibold\" style={{ textAlign: \"center\" }}>\n                      {sign.text}\n                    </Text>\n                  )}\n                </Div>\n              </Group>\n            ))\n          ) : (\n            <Div\n              style={{\n                display: \"flex\",\n                flexDirection: \"column\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n                paddingTop: 80,\n              }}\n            >\n              <Icon56Stars3Outline width={96} height={96} />\n              <Title> Здесь еще нет автографов </Title>\n            </Div>\n          )}\n        </React.Fragment>\n      ) : (\n        <div\n          style={{\n            display: \"flex\",\n            alignItems: \"center\",\n            flexDirection: \"column\",\n          }}\n        >\n          <Spinner size=\"large\" style={{ margin: \"20px 0\" }} />\n        </div>\n      )}\n    </Panel>\n  );\n};\n\nHome.propTypes = {\n  id: PropTypes.string.isRequired,\n  go: PropTypes.func.isRequired,\n  fetchedUser: PropTypes.shape({\n    photo_200: PropTypes.string,\n    first_name: PropTypes.string,\n    last_name: PropTypes.string,\n    city: PropTypes.shape({\n      title: PropTypes.string,\n    }),\n  }),\n  owner: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n  }),\n};\n\nexport default Home;\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport bridge from \"@vkontakte/vk-bridge\";\n\nimport {\n  Avatar,\n  Chip,\n  Panel,\n  PanelHeader,\n  Div,\n  FormLayout,\n  FormItem,\n  FormStatus,\n  Select,\n  CustomSelectOption,\n  Button,\n} from \"@vkontakte/vkui\";\nimport { ChipsSelect } from \"@vkontakte/vkui/dist/unstable\";\n\nimport axios from \"axios\";\n\nconst Settings = ({ id, fetchedUser, go }) => {\n  const [selectedViewUsers, setViewUsers] = useState([]);\n  const [selectedSendUsers, setSendUsers] = useState([]);\n  const [friends, setFriends] = useState([]);\n  const [error, setError] = useState(false);\n  const [privacy, setPrivacy] = useState({ send: \"0\", view: \"0\" });\n\n  const onChangeViewPrivacy = (e) => {\n    const { value } = e.currentTarget;\n    setPrivacy({ send: privacy.send, view: value });\n  };\n\n  const onChangeSendPrivacy = (e) => {\n    const { value } = e.currentTarget;\n    setPrivacy({ send: value, view: privacy.view });\n  };\n\n  const viewUsersChipsProps = {\n    value: selectedViewUsers,\n    onChange: setViewUsers,\n    options: friends,\n    placeholder: \"Не выбраны\",\n    emptyText: \"Совсем ничего не найдено\",\n  };\n\n  const sendUsersChipsProps = {\n    value: selectedSendUsers,\n    onChange: setSendUsers,\n    options: friends,\n    placeholder: \"Не выбраны\",\n    emptyText: \"Совсем ничего не найдено\",\n  };\n\n  const onClickSubmit = (e) => {\n    if (\n      (selectedViewUsers.length == 0 && privacy.view == 2) ||\n      (selectedSendUsers.length == 0 && privacy.send == 2)\n    ) {\n      setError(true);\n      return;\n    }\n\n    let send = [],\n      view = [];\n\n    switch (privacy.send) {\n      case \"0\": {\n        send = [0];\n        break;\n      }\n      case \"1\": {\n        send = [1];\n        break;\n      }\n      case \"2\": {\n        send = selectedSendUsers.map((user) => user.value);\n        break;\n      }\n      default: {\n        send = [-1];\n        break;\n      }\n    }\n\n    switch (privacy.view) {\n      case \"0\": {\n        view = [0];\n        break;\n      }\n      case \"1\": {\n        view = [1];\n        break;\n      }\n      case \"2\": {\n        view = selectedViewUsers.map((user) => user.value);\n        break;\n      }\n      default: {\n        view = [-1];\n        break;\n      }\n    }\n    axios.put(`https://vk-final-vk-mini-apps.herokuapp.com/v1/user/${fetchedUser.id}/`, {\n      write_permission: send,\n      read_permission: view,\n    });\n    go(e);\n  };\n\n  useEffect(async () => {\n    const friends_ = await bridge\n      .send(\"VKWebAppCallAPIMethod\", {\n        method: \"friends.get\",\n        request_id: \"32test\",\n        params: {\n          user_id: fetchedUser.id,\n          fields: \"photo_200_orig\",\n          v: 5.131,\n          access_token: process.env.REACT_APP_ACCESS_TOKEN,\n        },\n      })\n      .then(({ response }) =>\n        response.items.map((user) => ({\n          value: user.id,\n          label: `${user.first_name} ${user.last_name}`,\n          src: user.photo_200_orig,\n        }))\n      );\n\n    const users = await axios\n      .get(`https://vk-final-vk-mini-apps.herokuapp.com/v1/user`)\n      .then(({ data }) => data);\n\n    if (users.some((user) => user.id == fetchedUser.id)) {\n      await axios\n        .get(`https://vk-final-vk-mini-apps.herokuapp.com/v1/user/${fetchedUser.id}`)\n        .then(({ data }) => {\n          const { read_permission, write_permission } = data;\n          let view, send;\n\n          if (read_permission[0] == 0) view = \"0\";\n          if (write_permission[0] == 0) send = \"0\";\n\n          if (read_permission[0] == 1) view = \"1\";\n          if (write_permission[0] == 1) send = \"1\";\n\n          if (read_permission[0] == -1) view = \"3\";\n          if (write_permission[0] == -1) send = \"3\";\n\n          if (write_permission[0] > 2) {\n            send = \"2\";\n            setSendUsers(\n              friends_.filter((friend) =>\n                write_permission.includes(friend.value)\n              )\n            );\n          }\n          if (read_permission[0] > 2) {\n            view = \"2\";\n            setViewUsers(\n              friends_.filter((friend) =>\n                read_permission.includes(friend.value)\n              )\n            );\n          }\n          setPrivacy({ send: send, view: view });\n        });\n    }\n\n    setFriends(friends_);\n  }, []);\n\n  return (\n    <Panel id={id}>\n      <PanelHeader>Настройки альбома</PanelHeader>\n      <FormLayout>\n        {error && (\n          <Div>\n            <FormStatus header=\"Пустой список\" mode=\"error\">\n              Укажите каким друзьям вы предоставляете доступ\n            </FormStatus>\n          </Div>\n        )}\n        <FormItem top=\"Кто может смотреть мои автографы:\">\n          <Select\n            value={privacy.view}\n            onChange={onChangeViewPrivacy}\n            placeholder=\"Выберите уровень приватности\"\n            options={[\n              {\n                value: \"0\",\n                label: \"Все\",\n              },\n              {\n                value: \"1\",\n                label: \"Друзья\",\n              },\n              {\n                value: \"2\",\n                label: \"Некоторые друзья\",\n              },\n              {\n                value: \"3\",\n                label: \"Никто\",\n              },\n            ]}\n          />\n        </FormItem>\n        {privacy.view == \"2\" && (\n          <FormItem top=\"Выберите пользователей\">\n            <ChipsSelect\n              {...viewUsersChipsProps}\n              showSelected={false}\n              closeAfterSelect={false}\n              onChangeStart={(e, option) => {\n                if (option.value === \"download\") {\n                  e.preventDefault();\n                  alert(\"download!\");\n                }\n              }}\n              renderChip={({\n                value,\n                label,\n                option: { src, icon },\n                ...rest\n              }) => (\n                <Chip\n                  value={value}\n                  before={<Avatar size={20} src={src} />}\n                  {...rest}\n                >\n                  {label}\n                </Chip>\n              )}\n              renderOption={({\n                option: { src, value, icon },\n                ...otherProps\n              }) => {\n                return (\n                  <CustomSelectOption\n                    before={\n                      icon ? (\n                        <Avatar size={20}>{icon}</Avatar>\n                      ) : (\n                        <Avatar size={20} src={src} />\n                      )\n                    }\n                    {...otherProps}\n                  />\n                );\n              }}\n            />\n          </FormItem>\n        )}\n        <FormItem top=\"Кто может оставлять мне автографы:\">\n          <Select\n            value={privacy.send}\n            onChange={onChangeSendPrivacy}\n            placeholder=\"Выберите уровень приватности\"\n            options={[\n              {\n                value: \"0\",\n                label: \"Все\",\n              },\n              {\n                value: \"1\",\n                label: \"Друзья\",\n              },\n              {\n                value: \"2\",\n                label: \"Некоторые друзья\",\n              },\n              {\n                value: \"3\",\n                label: \"Никто\",\n              },\n            ]}\n          />\n        </FormItem>\n        {privacy.send == \"2\" && (\n          <FormItem top=\"Выберите пользователей\">\n            <ChipsSelect\n              {...sendUsersChipsProps}\n              showSelected={false}\n              closeAfterSelect={false}\n              onChangeStart={(e, option) => {\n                if (option.value === \"download\") {\n                  e.preventDefault();\n                  alert(\"download!\");\n                }\n              }}\n              renderChip={({\n                value,\n                label,\n                option: { src, icon },\n                ...rest\n              }) => (\n                <Chip\n                  value={value}\n                  before={<Avatar size={20} src={src} />}\n                  {...rest}\n                >\n                  {label}\n                </Chip>\n              )}\n              renderOption={({\n                option: { src, value, icon },\n                ...otherProps\n              }) => {\n                return (\n                  <CustomSelectOption\n                    before={\n                      icon ? (\n                        <Avatar size={20}>{icon}</Avatar>\n                      ) : (\n                        <Avatar size={20} src={src} />\n                      )\n                    }\n                    {...otherProps}\n                  />\n                );\n              }}\n            />\n          </FormItem>\n        )}\n      </FormLayout>\n      <Div>\n        <Button\n          size=\"l\"\n          appearance=\"overlay\"\n          stretched\n          onClick={onClickSubmit}\n          data-to=\"home\"\n        >\n          Сохранить\n        </Button>\n      </Div>\n    </Panel>\n  );\n};\n\nSettings.propTypes = {\n  id: PropTypes.string.isRequired,\n  go: PropTypes.func.isRequired,\n  fetchedUser: PropTypes.shape({\n    photo_200: PropTypes.string,\n    first_name: PropTypes.string,\n    last_name: PropTypes.string,\n    city: PropTypes.shape({\n      title: PropTypes.string,\n    }),\n  }),\n};\n\nexport default Settings;\n","import React, { useEffect, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport {\r\n  Panel,\r\n  PanelHeader,\r\n  Button,\r\n  Div,\r\n  Select,\r\n  FormItem,\r\n  FormLayout,\r\n  FormStatus,\r\n  Input,\r\n} from \"@vkontakte/vkui\";\r\nimport { Icon24Write, Icon24PenOutline } from \"@vkontakte/icons\";\r\n\r\nimport { Paintable } from \"paintablejs/react\";\r\nimport styles from \"../assets/app.module.css\";\r\nimport axios from \"axios\";\r\n\r\nconst CreateSign = ({ id, fetchedUser, owner, go }) => {\r\n  const [error, setError] = useState(false);\r\n  const [signType, setSignType] = useState(0);\r\n\r\n  const [useEraser, setUseEraser] = useState(false);\r\n  const [active, setActive] = useState(true);\r\n  const [pencilConfig, setPencilConfig] = useState({\r\n    thickness: 5,\r\n    color: \"#000000\",\r\n  });\r\n\r\n  const [sign, setSign] = useState(null);\r\n\r\n  const onChangeColor = (e) => {\r\n    setPencilConfig({\r\n      thickness: pencilConfig.thickness,\r\n      color: e.target.value,\r\n    });\r\n  };\r\n\r\n  const onChangeSignType = (e) => {\r\n    const { value } = e.currentTarget;\r\n    setSignType(value);\r\n    setSign(null);\r\n  };\r\n\r\n  const onClickSubmit = async (e) => {\r\n    if (sign == null) {\r\n      setError(true);\r\n      return;\r\n    }\r\n    const formData = new FormData();\r\n    formData.append(\"user_id\", fetchedUser.id);\r\n    formData.append(\"user_to_id\", owner.id);\r\n    formData.append(signType == 0 ? \"text\" : \"file\", sign);\r\n\r\n    await axios.post(\"https://vk-final-vk-mini-apps.herokuapp.com/v1/photo/\", formData, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    });\r\n    e.currentTarget = {\r\n      dataset: {\r\n        to: \"home\",\r\n      },\r\n    };\r\n    go(e);\r\n  };\r\n\r\n  const setFile = (e) => {\r\n    const reader = new FileReader();\r\n    reader.onloadend = () => {\r\n      setSign(reader.result.split(',')[1]);\r\n    };\r\n    reader.readAsDataURL(e.target.files[0]);\r\n  };\r\n\r\n  const setGraffity = () => {\r\n    setActive(false);\r\n  };\r\n\r\n  return (\r\n    <Panel id={id}>\r\n      <PanelHeader style={{ zIndex: 10000 }}>Создать автограф</PanelHeader>\r\n      <FormLayout>\r\n        {error && (\r\n          <Div>\r\n            <FormStatus header=\"Пустая бумажечка\" mode=\"error\">\r\n              Вы не создали автограф\r\n            </FormStatus>\r\n          </Div>\r\n        )}\r\n        <FormItem top=\"Тип автографа\">\r\n          <Select\r\n            value={signType}\r\n            onChange={onChangeSignType}\r\n            placeholder=\"Выберите тип автографа\"\r\n            options={[\r\n              {\r\n                value: 0,\r\n                label: \"Текст\",\r\n              },\r\n              {\r\n                value: 1,\r\n                label: \"Картинка\",\r\n              },\r\n              {\r\n                value: 2,\r\n                label: \"Граффити\",\r\n              },\r\n            ]}\r\n          />\r\n        </FormItem>\r\n      </FormLayout>\r\n      {signType == 0 ? (\r\n        <Div>\r\n          <Input\r\n            type={\"text\"}\r\n            onChange={(e) => {\r\n              setSign(e.target.value);\r\n            }}\r\n          />\r\n        </Div>\r\n      ) : signType == 1 ? (\r\n        <Div>\r\n          <Input type={\"file\"} accept={\"image/*\"} onChange={setFile} />\r\n        </Div>\r\n      ) : (\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          <Paintable\r\n            width={400}\r\n            height={400}\r\n            active={active}\r\n            color={pencilConfig.color}\r\n            thickness={pencilConfig.thickness}\r\n            useEraser={useEraser}\r\n            onSave={(image) => setSign(image.split(',')[1])}\r\n            onLongPress={() => console.log(\"long\")}\r\n          >\r\n            <div className={styles[\"canvas-inner\"]}>\r\n              <div\r\n                style={{\r\n                  position: \"absolute\",\r\n                  top: 8,\r\n                  right: 8,\r\n                  display: \"flex\",\r\n                  gap: 8,\r\n                  zIndex: 9999,\r\n                }}\r\n              >\r\n                <Button\r\n                  size=\"l\"\r\n                  appearance=\"neutral\"\r\n                  before={useEraser ? <Icon24PenOutline /> : <Icon24Write />}\r\n                  stretched\r\n                  onClick={() => setUseEraser(!useEraser)}\r\n                />\r\n\r\n                <input\r\n                  type={\"color\"}\r\n                  className={styles[\"colorPicker\"]}\r\n                  value={pencilConfig.color}\r\n                  onChange={onChangeColor}\r\n                />\r\n              </div>\r\n            </div>\r\n          </Paintable>\r\n        </div>\r\n      )}\r\n      <Div>\r\n        {signType == 2 && active ? (\r\n          <Button\r\n            size=\"l\"\r\n            appearance=\"overlay\"\r\n            stretched\r\n            onClick={setGraffity}\r\n            data-to=\"home\"\r\n          >\r\n            Сохранить\r\n          </Button>\r\n        ) : (\r\n          <Button\r\n            size=\"l\"\r\n            appearance=\"overlay\"\r\n            stretched\r\n            onClick={onClickSubmit}\r\n            data-to=\"home\"\r\n          >\r\n            Отправить\r\n          </Button>\r\n        )}\r\n      </Div>\r\n    </Panel>\r\n  );\r\n};\r\n\r\nCreateSign.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  go: PropTypes.func.isRequired,\r\n  fetchedUser: PropTypes.shape({\r\n    photo_200: PropTypes.string,\r\n    first_name: PropTypes.string,\r\n    last_name: PropTypes.string,\r\n    city: PropTypes.shape({\r\n      title: PropTypes.string,\r\n    }),\r\n  }),\r\n  owner: PropTypes.shape({\r\n    id: PropTypes.string.isRequired,\r\n    name: PropTypes.string.isRequired,\r\n  }),\r\n};\r\n\r\nexport default CreateSign;\r\n","import React, { useState, useEffect } from \"react\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport {\n  View,\n  ScreenSpinner,\n  AdaptivityProvider,\n  AppRoot,\n  ConfigProvider,\n  SplitLayout,\n  SplitCol,\n} from \"@vkontakte/vkui\";\n\nimport \"@vkontakte/vkui/dist/vkui.css\";\nimport \"@vkontakte/vkui/dist/unstable.css\";\n\nimport { Home, Settings, CreateSign } from \"./panels\";\n\nconst App = () => {\n  const [scheme, setScheme] = useState(\"bright_light\");\n  const [activePanel, setActivePanel] = useState(\"home\");\n  const [owner, setOwner] = useState(null);\n  const [fetchedUser, setUser] = useState(null);\n  const [popout, setPopout] = useState(<ScreenSpinner size=\"large\" />);\n\n  useEffect(() => {\n    bridge.subscribe(({ detail: { type, data } }) => {\n      if (type === \"VKWebAppUpdateConfig\") {\n        setScheme(data.scheme);\n      }\n    });\n\n    async function fetchData() {\n      const user = await bridge.send(\"VKWebAppGetUserInfo\");\n      setUser(user);\n      setPopout(null);\n\n      const params = new Proxy(new URLSearchParams(window.location.search), {\n        get: (searchParams, prop) => searchParams.get(prop),\n      });\n      const ownerID = params.vk_profile_id ?? params.vk_user_id;\n      const ownerName = await bridge\n        .send(\"VKWebAppCallAPIMethod\", {\n          method: \"users.get\",\n          request_id: \"32test\",\n          params: {\n            user_ids: ownerID,\n            name_case: \"acc\",\n            v: 5.131,\n            access_token: process.env.REACT_APP_ACCESS_TOKEN,\n          },\n        })\n        .then(({ response }) => response[0].first_name);\n      setOwner({ id: ownerID.toString(), name: ownerName });\n    }\n    fetchData();\n  }, []);\n\n  const go = (e) => {\n    setActivePanel(e.currentTarget.dataset.to);\n  };\n\n  return (\n    <ConfigProvider scheme={scheme}>\n      <AdaptivityProvider>\n        <AppRoot>\n          <SplitLayout popout={popout}>\n            <SplitCol>\n              <View activePanel={activePanel}>\n                <Home\n                  id=\"home\"\n                  fetchedUser={fetchedUser}\n                  owner={owner}\n                  go={go}\n                />\n                <Settings id=\"settings\" fetchedUser={fetchedUser} go={go} />\n                <CreateSign\n                  id=\"create_sign\"\n                  fetchedUser={fetchedUser}\n                  owner={owner}\n                  go={go}\n                />\n              </View>\n            </SplitCol>\n          </SplitLayout>\n        </AppRoot>\n      </AdaptivityProvider>\n    </ConfigProvider>\n  );\n};\n\nexport default App;\n","const initialState = {\r\n  signs: [],\r\n};\r\n\r\nconst signs = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"SET_SIGNS\":\r\n      return {\r\n        ...state,\r\n        signs: action.payload,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default signs;\r\n","import { combineReducers } from \"redux\";\r\n\r\nimport signReducer from \"./signs.reducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n  signs: signReducer,\r\n});\r\n\r\nexport default rootReducer;","import { createStore, compose, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport rootReducer from './reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nexport default store;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\nimport { Provider } from \"react-redux\";\nimport store from \"./store/store\"\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvas-inner\":\"app_canvas-inner__1Kuv6\",\"colorPicker\":\"app_colorPicker__1bO1p\"};"],"sourceRoot":""}